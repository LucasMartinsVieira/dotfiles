#!/usr/bin/env bash

confirm() {
  printf "No\nYes" | fuzzel --lines 5 --dmenu --prompt="$1"
}

OPTIONS=" Shutdown
 Reboot
󰍃 Logout
󰤄 Suspend
 Lock"

CHOICE=$(printf "%s\n" "$OPTIONS" | fuzzel --lines 5 --dmenu --prompt="Power:")

case "$CHOICE" in
*Shutdown)
  [ "$(confirm Shutdown)" = "Yes" ] && systemctl poweroff
  ;;
*Reboot)
  [ "$(confirm Reboot)" = "Yes" ] && systemctl reboot
  ;;
*Logout)
  [ "$(confirm Logout)" = "Yes" ] && niri msg action quit
  ;;
*Suspend)
  if [ "$(confirm Suspend)" = "Yes" ]; then
    sleep 1 && systemctl suspend
  fi
  ;;
*Lock)
  hyprlock
  ;;
*)
  exit 0
  ;;
esac
