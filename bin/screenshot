#!/usr/bin/env bash

LOCATION=$HOME/Imagens/Screenshot/
TIME=$(date +"%y%m%d-%H%M-%S")

notify_user() {
  notify-send -t 1000 -u normal "Screenshot Tool" "Smile ðŸ“¸"
}

full() {
  grim - | tee "$LOCATION$TIME.png" | wl-copy && notify_user
}

area() {
  grim -g "$(slurp)" - | tee "$LOCATION$TIME.png" | wl-copy && notify_user
}

window() {
  notify-send -t 1000 -u normal "Screenshot Tool" "TODO"
}

OPTIONS="Full
Area"

select_option() {
  CHOICE=$(printf "%s\n" "$OPTIONS" | fuzzel --lines 4 --dmenu --prompt="Screenshot:")

  case "$CHOICE" in
  *Full)
    full
    ;;
  *Area)
    area
    ;;
  *)
    exit 0
    ;;
  esac
}

if [[ "$1" == "--full" ]]; then
  full
elif [[ "$1" == "--area" ]]; then
  area
elif [[ "$1" == "--window" ]]; then
  window
else
  select_option
fi
